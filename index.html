<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<head>
    <title>Simple Dorking</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script async src="https://cse.google.com/cse.js?cx=b099d6700a5dfe496"></script>
    <script>
        function getAfter() {
            let selected = $("select#after").val()
            let count = 1;
            if (selected === "half") {
                selected = "months";
                count = 6;
            }
            return "after:" + moment().subtract(count, selected).format("YYYY-MM-DD");
        }
        window.__gcse || (window.__gcse = {});
        window.__gcse.searchCallbacks = {
            web: {
                starting: function(gname, query) {
                    console.log(query);
                    return getAfter() + ' ' + query;
                }
            },
        };
    </script>
</head>
<style>
    .dropdown {
        width: 80px;
    }
</style>
<body>
    <select id="after" class="dropdown">
        <option value="years" selected>1 Year</option>
        <option value="half">6 months</option>
        <option value="months">1 month</option>
        <option value="weeks">1 week</option>
        <option value="days">1 day</option>
    </select>
    <div class="gcse-search"></div>
</body>
